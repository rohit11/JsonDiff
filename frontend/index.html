<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JSON Migration Tool</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- Static Header -->
  <h1>JSON Migration Tool</h1>

  <!-- Static Selectors -->
  <div class="selectors">
    <div>
      <label>Source Env:</label>
      <select id="sourceEnv">
        <option value="remote_dev">Remote Dev</option>
        <option value="remote_stage">Remote Stage</option>
        <option value="remote_prod">Remote Prod</option>
        <option value="local_dev">Local Dev</option>
        <option value="local_stage">Local Stage</option>
        <option value="local_prod">Local Prod</option>
      </select>
    </div>

    <div>
      <label>Target Env:</label>
      <select id="targetEnv">
        <option value="remote_dev">Remote Dev</option>
        <option value="remote_stage">Remote Stage</option>
        <option value="remote_prod">Remote Prod</option>
        <option value="local_dev">Local Dev</option>
        <option value="local_stage">Local Stage</option>
        <option value="local_prod">Local Prod</option>
      </select>
    </div>
  </div>

  <!-- Static Buttons -->
  <div class="top-buttons" style="text-align:center;">
    <button onclick="downloadRemoteJson()">üì• Download Remote JSON</button>
    <button onclick="loadTables()">Load Tables</button>
    <button onclick="showMigrationPreview()">Migrate Selected</button>
    <button onclick="toggleAllTables(true)">Expand All</button>
    <button onclick="toggleAllTables(false)">Collapse All</button>
  </div>

  <!-- Static Filter -->
  <div class="filter-container">
    <label for="filterSelect"><strong>Filter Rows:</strong></label>
    <select id="filterSelect">
      <option value="all">All</option>
      <option value="diff">Only Differences (Yellow Rows)</option>
      <option value="missing">Only Missing (Red Rows)</option>
      <option value="diff-missing">Only Differences and Missing</option>
      <option value="same">Only Same Entries (Green Rows)</option>
    </select>
  </div>

  <!-- ‚úÖ Scrollable Content Container -->
  <div class="container">
    <!-- Tables Section -->
    <div id="tables"></div>

    <!-- Loading Spinner -->
    <div id="loading" style="display:none; text-align:center;">
      <p>Loading...</p>
    </div>

    <!-- Target Data After Migration -->
    <h2>Target Environment Data</h2>
    <div id="targetData"></div>
  </div>

  <!-- Cell Detail Modal -->
  <div id="cellModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeCellModal()">&times;</span>
      <div id="cellContent"></div>
    </div>
  </div>

  <div id="previewModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closePreviewModal()">&times;</span>
      <h2>Migration Preview</h2>
      <div id="previewDetails" style="max-height: 400px; overflow-y: auto;"></div>
      <div style="text-align:center; margin-top: 15px;">
        <button onclick="confirmMigration()">‚úÖ Confirm</button>
        <button onclick="closePreviewModal()">‚ùå Cancel</button>
      </div>
    </div>
  </div>  

  <!-- JavaScript -->
  <script src="app.js"></script>

</body>
</html>
